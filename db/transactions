EX 1 ----------------------------

create table accounts (                                                 
name TEXT PRIMARY KEY,
balance INTEGER CHECK (balance >= 0));

learning=> Begin;
BEGIN
learning=*> UPDATE accounts SET balance = balance - 200 where name = 'Lena';
ERROR:  new row for relation "accounts" violates check constraint "accounts_balance_check"
DETAIL:  Failing row contains (Lena, -100).
learning=!> Rollback;

EX 2 ----------------------------
learning=> Begin;
BEGIN
learning=*> UPDATE accounts SET balance = balance + 100 where name = 'Lena';
UPDATE 1
learning=*> SAVEPOINT sp1;
SAVEPOINT
learning=*> UPDATE accounts SET balance = balance - 300 where name = 'Lena';
ERROR:  new row for relation "accounts" violates check constraint "accounts_balance_check"
DETAIL:  Failing row contains (Lena, -100).
learning=!> ROLLBACK TO sp1;
learning=*> UPDATE accounts SET balance = balance - 200 where name = 'Lena';
learning=*> UPDATE accounts SET balance = balance + 200 where name = 'Bob';
Commit;

Task 1 --------------------------

BEGIN;

UPDATE books SET status = 'available' WHERE name = 'book_name';

UPDATE book_logs SET return_date = CURRENT_DATE WHERE name = 'book_name';

UPDATE users SET active_borrows = active_borrows - 1 WHERE name = 'student_name';

COMMIT; 
